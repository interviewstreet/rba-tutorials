The aim for this document is to help you create your first Back-end Developer question on REST Api using Java Sprint Boot. The dcoument is divided into following sections:

- Problem Statement
- Project Structure
- Uploading the problem to HackerRank
- Testing the question
- Adding the question to a test
- Inviting a candidate

This project assumes that you know the basics of Java and Spring Boot framework.

## Problem Statement

Create a REST API to manage books and libraries.

**Models**

- The `book` has the following attributes:
    - `isbn`: The unique string identifier.
    - `name`: The name of the book.
    - `author_name`: The author name.
    - `publication_year`: The year of publication.
    - `selling_price`: The selling price.

- The `library` has the following attributes:
    - `id`: The autogenerated sequential unique integer identifier.
    - `name`: The name of the library.

**Routes**

- *Books Controller*
    - `POST '/books'`: Creates a book. The request body is a JSON:
        ```json
        {
          "isbn":,
          "name":,
          "author_name":,
          "publication_year":,
          "selling_price":,
          "library_id":
        }
        ```
        Here, `library_id` is optional. It implies that the book should be added to the specified library if not present.
    - `PUT '/books/{isbn}'`: Updates book attributes. Note that updating the library must remove the book from the existing library.
    - `GET '/books'`: Returns all the books. The response should be JSON array:
        ```json
        [
          {
            "isbn":,
            "name":,
            "author_name":,
            "publication_year":,
            "selling_price":,
            "library_id":
          }
        ]
        ```
    - `GET '/books/{isbn}'`: Returns a book. The response should be JSON:
        ```json
        {
          "isbn":,
          "name":,
          "author_name":,
          "publication_year":,
          "selling_price":,
          "library_id":
        }
        ```
    - `DELETE '/books/{isbn}'`: Deletes a book.

- *Libraries Controller*
    - `POST '/libraries'`: Creates a library. The request body is a JSON:
        ```json
        {
          "name":
        }
        ```
    - `GET '/libraries'`: Returns all the libraries. The response should be JSON array:
        ```json
        [
          {
            "id":,
            "name":,
            "books":
          }
        ]
        ```
        Here, `books` is JSON array describing all the books present in the library:
        ```json
        [
          {
            "isbn":,
            "name":,
            "author_name":,
            "publication_year":,
            "selling_price":
          }
        ]
        ```
    - `GET '/libraries/{id}'`: Returns a library. The response should be JSON:
        ```json
        {
          "id":,
          "name":,
          "books":
        }
        ```
        Here, `books` is JSON array describing all the books present in the library:
        ```json
        [
          {
            "isbn":,
            "name":,
            "author_name":,
            "publication_year":,
            "selling_price":
          }
        ]
        ```
    - `DELETE '/libraries/{id}'`: Deletes a library. Note that deleting a library must not destroy the books but should update the library attribute for each of the books present in the library.

## Project Structure

Project follows the common structure of a Java Sprint Boot app. We have added test cases to the project to validate candidate solutions. These testcases can be used to setup scoring for the project.

```text
  .
  ├── pom.xml
  └── src
      ├── main
      │   ├── java
      │   │   └── com
      │   │       └── hackerrank
      │   │           ├── Application.java
      │   │           ├── controllers
      │   │           ├── models
      │   │           └── repositories
      │   └── resources
      │       └── application.properties
      └── test
          └── java
              └── com
                  └── hackerrank
                      ├── TestSuite.java
                      └── requests
                          ├── BooksAndLibrariesControllerTest.java
                          ├── BooksControllerTest.java
                          └── LibrariesControllerTest.java
  ```

Review the test cases present in `src/test/java/com/hackerrank/requests/` folder to understand how the REST Apis are being tested for correctness. The test command generates a report in one or more JUnit XML files which are then parsed by HackerRank platform to give candidate a score.

## Uploading the problem to HackerRank

### Step 0: Prepare the project

- **Project Requirements**
  We assume the project passes all the tests on local. You can verify the same by running the `com;hackerrank.TestSuite` in your local IDE like Eclipse or by running `mvn test -Dtest=TestSuite` command in a terminal. Before you can import this project into a question, you must do the folowing:

  - Define server `address` and `port` by creating `src/main/resources/application.properties`:
      ```text
      server.address=0.0.0.0
      server.port=8000
      ```
    Using `localhost` or any port other than 8000 for servers that should be accessible through a public url will not work. Any servers (like a database server) that does not require a public url can use any available port.
  - We recommend that you do not upload a working project when creating a question for candidates. Although the incomplete version of the project should not result in compile errors when running the tests.
      - Complete project:
      ```text
      └── com
          └── hackerrank
              ├── Application.java
              ├── controllers
              │   ├── BooksController.java
              │   └── LibrariesController.java
              ├── dao
              │   └── BookDao.java
              ├── models
              │   ├── Book.java
              │   └── Library.java
              └── repositories
                  ├── BooksRepository.java
                  └── LibrariesRepository.java
      ```
      - Incomplete project:
      ```text
      └── com
          └── hackerrank
              ├── Application.java
              ├── controllers
              ├── models
              └── repositories
      ```
  - Optionally, you can create a test suite `TestSuite.java` to execute all the tests if more than one tests present, to get all the tests status in one report. This sample project already has a `TestSuite.java` file.
      ```text
      └── com
          └── hackerrank
              ├── TestSuite.java
              └── requests
                  ├── BooksAndLibrariesControllerTest.java
                  ├── BooksControllerTest.java
                  └── LibrariesControllerTest.java
      ```

- **Add hackerrank.yml file to configure project for HackerRank platform**

  `hackerrank.yml` is where you define various properties of the project that are required by HackerRank. The following properties should be defined:
  - `version`: The configuration version number (must be 1.0).
  - `configuration`: This is where you provide various configurations for your project
      - `has_webserver`: [true or false] Define whether your question has a webserver or not that should be exposed to port 8000.
      - `scoring`: [optional] Only required if you want to setup scoring for your question. In this example, we will setup scoring.
          - `command`: The scoring command that is required for generating relevant scoring files. Score is calculated using this formula - `(# of testcases passed/Total # of testcases) * Max score`
          - `files`: An array of JUnit XML or Tap file paths (relative). The scoring command should generate these files.
          - `testcase_weights`: An optional hash describing the testcase weights. The sum of all the weights must be one. If testcase weights are present, score is calculated by multiplying passed test cases with their relative weights.
      - `ide_config`:
          - `default_open_files`: An array of file paths that must be open by default when a candidate opens the question
          - `project_menu`: The HackerRank IDE offers certain helper commands to the candidates to help run/install/test the application. Here you can configure these commands.
              - `install`: Command to install dependencies, if required.
              - `run`: Command to run the project, if required.
              - `test`: Command to run the test suite.

  Below is a `hackerrank.yml` configuration that you can use for this project.
  ```yml
  version: 1.0
  configuration:
      has_webserver: True
      scoring:
          command: "mvn clean test -Dtest=TestSuite"
          files:
              - "target/surefire-reports/TEST-com.hackerrank.TestSuite.xml"
          testcase_weights:
              "createLibrary": 0.07
              "getLibraryById": 0.07
              "getAllLibraries": 0.07
              "deleteLibrary": 0.07
              "getAllBooks": 0.07
              "updateBook": 0.07
              "createBook": 0.08
              "getBookByIsbn": 0.07
              "deleteBook": 0.07
              "createLibraryAndCreateBook": 0.12
              "createLibraryCreateBookAndDeleteBook": 0.12
              "createLibraryCreateBookAndDeleteLibrary": 0.12
      ide_config:
          default_open_files:
              - "src/test/java/com/hackerrank/requests/BooksControllerTest.java"
              - "src/test/java/com/hackerrank/requests/LibrariesControllerTest.java"
              - "src/test/java/com/hackerrank/requests/BooksAndLibrariesControllerTest.java"
          project_menu:
              install: "mvn clean install"
              run: "mvn spring-boot:run"
              test: "mvn test -Dtest=TestSuite"
  ```

  Create a new file `hackerrank.yml` in the root directory of the project with the above config and save it. After that, your project is ready for HackerRank. The final structure of this project should be the following:

  ```text
  .
  ├── hackerrank.yml
  ├── pom.xml
  └── src
      ├── main
      │   ├── java
      │   │   └── com
      │   │       └── hackerrank
      │   │           ├── Application.java
      │   │           ├── controllers
      │   │           ├── models
      │   │           └── repositories
      │   └── resources
      │       └── application.properties
      └── test
          └── java
              └── com
                  └── hackerrank
                      ├── TestSuite.java
                      └── requests
                          ├── BooksAndLibrariesControllerTest.java
                          ├── BooksControllerTest.java
                          └── LibrariesControllerTest.java
  ```

### Step 1: Create a new Back-end Developer question

- Go to `Library > Create Question > Back-end Developer (beta)` to create a new Back-end Developer question.

- You must start by selecting a framework. For this project, select `Java Spring Boot`. If you are creating a .NET, Go or PHP question, select `Custom`.

### Step 2: Import Project & Validate

- In this step, you must import the project we prepared in `Step 0`. You can import it via a public git url, or by uploading a zip of the folder. Once imported, you can then validate the project.
- Validation is a mandatory step. It verifies that your project has a valid `hackerrank.yml` file and the configuration provided works. If the scoring command is configured, the scoring will be run. We will then try to find the scoring files and score the project. If this step fails, you will get an error and the log of the scoring command. Validation can also take several minutes if the scoring command is a time consuming one.
- This sample project should validate without any error. Most projects should pass validation without any error if the scoring command run locally and produces the output files in the right path, as provided in the configuration.
- Once validated successfully, you can hit `Proceed`.

### Step 3: Add question name, description and score
- In this step, you can provide the question name, problem description and a max score. Max score is used to score candidates solution (`(# of testcases passed/Total # of testcases) * Max score`). Optionally you can add question tags and internal notes. We recommend adding relevant question tags to every question.
- You can also test the project added in the previous step here by clicking on the `Try Question` button at the top right corner. This will open a pop up with the HackerRank IDE. Pop blockers can block this pop up sometimes. It is safe to allow this pop up. Inside the IDE, you can test your question as it would be presented to the candidates. The session is available to you for 30 mins.
- After adding the details, you can hit `Save & Proceed`. Clicking on this button will also kill any running `Try Question` session.
- After clicking `Save & Proceed`, you are ready to add this question to a test.

### Step 6: Add question to test
- Create a new test by going to `Tests > Create Test`.
- In the `Create a New Test` dialog, select the role as `Back-end Developer`. You should also select relevant work experience.
- Change the test name to `Sample Back-end Developer Test` and type `180` in the test duration. We recommend providing at least 3 hours for easy questions and 6 or more hours for medium/hard questions. This ensures the candidates have enough time to familiarise with the IDE.
- Select `Build your own test` and hit `Create Test` button.
- Once the test is created, click on the `+` icon at the bottom left corner of the screen. Select `Add from library`
- Switch to `My company questions` tab once in the library view.
- Find the question you created in Step 3 and add it to the test by clicking on the `+` icon next to the test.
- Once done, click on `Go to test` to come back to the test page.

### Step 7: Try test and invite candidates
- You are now ready to try the test yourself or invite candidates to take the test.
- Click on the `Try Test` button to try out the test, as it would be presented to a candidate.
- Once ready, you can click on the `Invite` button to invite candidates to your test.